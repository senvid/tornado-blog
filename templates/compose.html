{% extends "base.html" %}

{% block body %}
    <form action="{{ request.path }}" method="post" class="compose_form">
        <div>
            <input name="title" type="text" class="title" value="{{ entry.title if entry else "" }}" autofocus required/>
        </div>
        <div>
            <textarea name="markdown" class="markdown" required >{{ entry.markdown if entry else "" }}</textarea>
        </div>
        <div>
            <input type="submit" value="{{ _("Save changes") if entry else _("Publish post") }}" class="submit" />
            &nbsp;<a href="{{ "/entry/" + entry.slug if entry else "/" }}">{{ _("Cancel") }}</a>
        </div>
        {% if entry %}
          <input type="hidden" name="id" value="{{ entry.id }}"/>
        {% else %}
            <small class="local_log"></small>
        {% end %}
        {% module xsrf_form_html() %}
    </form>
{% end %}
{% block bottom %}
<script type="text/javascript">
    localSave(".markdown",".local_log");
    localSave(".title");
</script>
{% end %}
